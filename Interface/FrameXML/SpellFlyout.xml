<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/
..\FrameXML\UI.xsd">
	<Script file="SpellFlyout.lua"/>

	<CheckButton name="SpellFlyoutButtonTemplate" inherits="SmallActionButtonTemplate,SecureFrameTemplate" virtual="true" motionScriptsWhileDisabled="true">
		<!-- This doesn't actually use any of the behavior of an ActionButtonTemplate, just the appearance -->
		<Layers>
			<Layer level="OVERLAY">
				<Texture parentKey="GlyphIcon" hidden="true" alpha="1" alphaMode="BLEND" atlas="GlyphIcon-Spellbook" useAtlasSize="true">
					<Anchors>
						<Anchor point="TOPRIGHT" x="5" y="4"/>
					</Anchors>
				</Texture>
				<Texture parentKey="GlyphActivate" hidden="true" alpha="1" alphaMode="ADD" file="Interface\Buttons\CheckButtonHilight-Blue" useAtlasSize="true">
					<Anchors>
						<Anchor point="CENTER"/>
					</Anchors>
				</Texture>
				<Texture parentKey="AbilityHighlight" hidden="true" alpha="1" alphaMode="ADD" file="Interface\Buttons\CheckButtonHilight-Blue" useAtlasSize="true">
					<Anchors>
						<Anchor point="CENTER"/>
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="OVERLAY" textureSubLevel="1">
				<Texture parentKey="GlyphTranslation" hidden="true" alpha="1" alphaMode="ADD" atlas="GlyphIcon-Spellbook" useAtlasSize="true">
					<Anchors>
						<Anchor point="TOPRIGHT" x="5" y="4"/>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
		<Scripts>
			<OnLoad inherit="append">
				self:RegisterForDrag("LeftButton");
				_G[self:GetName().."Count"]:SetPoint("BOTTOMRIGHT", 0, 0);
				self.maxDisplayCount = 99;
			</OnLoad>
			<OnClick>
				SpellFlyoutButton_OnClick(self);
			</OnClick>
			<OnEnter>
				SpellFlyoutButton_SetTooltip(self);
			</OnEnter>
			<OnLeave>
				GameTooltip:Hide();
			</OnLeave>
			<OnDragStart>
				SpellFlyoutButton_OnDrag(self);
			</OnDragStart>
		</Scripts>
		<Animations>
			<AnimationGroup parentKey="GlyphActivateAnim" setToFinalAlpha="true">
				<Alpha childKey="GlyphActivate" duration="0.25" order="1" fromAlpha="0" toAlpha="1"/>
				<Alpha childKey="GlyphActivate" startDelay="0.25" duration="0.75" order="1" fromAlpha="1" toAlpha="0"/>
				<Scale childKey="GlyphActivate" smoothing="OUT" duration="0.25" order="1" fromScaleX="1" fromScaleY="1" toScaleX="1.35" toScaleY="1.35"/>
				<Alpha childKey="GlyphIcon" smoothing="OUT" duration="0.25" order="1" fromAlpha="0" toAlpha="1"/>
				<Scale childKey="GlyphIcon" smoothing="IN" duration="0.25" order="1" fromScaleX="1.75" fromScaleY="1.75" toScaleX="1" toScaleY="1"/>
				<Alpha childKey="GlyphTranslation" smoothing="OUT" duration="0.25" order="1" fromAlpha="0" toAlpha="1"/>
				<Translation childKey="GlyphTranslation" smoothing="OUT" duration="0.25" order="1" offsetX="-2" offsetY="-2"/>
				<Alpha childKey="GlyphTranslation" startDelay="0.25" smoothing="OUT" duration="0.25" order="1" fromAlpha="1" toAlpha="0"/>
				<Scripts>
					<OnFinished>
						SpellFlyout.glyphActivating = nil;
						self:GetParent().GlyphActivate:Hide();
					</OnFinished>
				</Scripts>
			</AnimationGroup>
			<AnimationGroup parentKey="AbilityHighlightAnim" setToFinalAlpha="true" looping="REPEAT">
				<Alpha childKey="AbilityHighlight" duration="0.25" order="1" fromAlpha="0.5" toAlpha="1"/>
				<Alpha childKey="AbilityHighlight" startDelay="0.5" duration="0.75" order="1" fromAlpha="1" toAlpha="0.5"/>
			</AnimationGroup>
		</Animations>
	</CheckButton>

	<Frame name="SpellFlyout" toplevel="true" hidden="true" frameStrata="DIALOG" frameLevel="10" inherits="SecureFrameTemplate" enableMouse="true">
		<Layers>
			<Layer level="BACKGROUND">
				<Texture name="SpellFlyoutBackgroundEnd" atlas="UI-HUD-ActionBar-IconFrame-FlyoutButton" useAtlasSize="true" parentKey="BgEnd"/>
				<Texture name="SpellFlyoutHorizontalBackground" parentKey="HorizBg" atlas="_UI-HUD-ActionBar-IconFrame-FlyoutMidLeft" useAtlasSize="true" horizTile="true" hidden="true"/>
				<Texture name="SpellFlyoutVerticalBackground" parentKey="VertBg" atlas="!UI-HUD-ActionBar-IconFrame-FlyoutMid" useAtlasSize="true" vertTile="true" hidden="true"/>
				<Texture parentKey="flyoutBottom" atlas="UI-HUD-ActionBar-IconFrame-FlyoutBottom" useAtlasSize="true">
					<Anchors>
						<Anchor point="TOP" relativeTo="SpellFlyoutVerticalBackground" relativePoint="BOTTOM"/>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
		<Frames>
			<CheckButton name="SpellFlyoutButton1" inherits="SpellFlyoutButtonTemplate"/>
		</Frames>
		<Scripts>
			<OnLoad function="SpellFlyout_OnLoad"/>
			<OnShow function="SpellFlyout_OnShow"/>
			<OnHide function="SpellFlyout_OnHide"/>
			<OnEvent function="SpellFlyout_OnEvent"/>
		</Scripts>
	</Frame>
</Ui>
